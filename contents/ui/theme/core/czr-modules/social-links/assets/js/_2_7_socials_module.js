var CZRSocialModuleMths=CZRSocialModuleMths||{};(function(api,$,_){$.extend(CZRSocialModuleMths,{initialize:function(id,options){if(_.isUndefined(window.socialModuleLocalized)){api.errorLog('social module => Missing localized js params socialModuleLocalized');}
var module=this;api.CZRDynModule.prototype.initialize.call(module,id,options);$.extend(module,{itemPreAddEl:'',itemInputList:'',modOptInputList:''});this.social_icons=['500px','adn','amazon','android','angellist','apple','behance','behance-square','bitbucket','black-tie','btc','buysellads','chrome','codepen','codiepie','connectdevelop','contao','dashcube','delicious','deviantart','digg','dribbble','dropbox','drupal','edge','empire','envelope','envelope-o','envelope-square','expeditedssl','facebook','facebook-f (alias)','facebook-square','firefox','flickr','fonticons','fort-awesome','forumbee','foursquare','get-pocket','gg','gg-circle','git','github','github-alt','github-square','gitlab','git-square','google','google-plus','google-plus-g','google-plus-square','google-wallet','gratipay','hacker-news','houzz','imdb','instagram','internet-explorer','ioxhost','joomla','jsfiddle','lastfm','lastfm-square','leanpub','linkedin','linkedin-in','linux','maxcdn','meetup','medium','mixcloud','mobile','mobile-alt','modx','odnoklassniki','odnoklassniki-square','opencart','openid','opera','optin-monster','pagelines','patreon','paypal','phone','phone-square','pied-piper','pied-piper-alt','pinterest','pinterest-p','pinterest-square','product-hunt','qq','rebel','reddit','reddit-alien','reddit-square','renren','rss','rss-square','safari','scribd','sellsy','share-alt','share-alt-square','shirtsinbulk','simplybuilt','skyatlas','skype','slack','slideshare','snapchat','soundcloud','spotify','stack-exchange','stack-overflow','steam','steam-square','stumbleupon','stumbleupon-circle','telegram','tencent-weibo','trello','tripadvisor','tumblr','tumblr-square','twitch','twitter','twitter-square','usb','viacoin','vimeo','vimeo-square','vine','vk','weibo','weixin','whatsapp','wikipedia-w','windows','wordpress','xing','xing-square','yahoo','y-combinator','yelp','youtube','youtube-square'];this.fa_solid_icons=['fa-envelope','fa-envelope-square','fa-mobile','fa-mobile-alt','fa-phone','fa-phone-square','fa-rss','fa-rss-square','fa-share-alt','fa-share-alt-square'];this.fa_icons_replacement={'fa-bitbucket-square':'fa-bitbucket','fa-facebook-official':'fa-facebook-f','fa-google-plus-circle':'fa-google-plus','fa-google-plus-official':'fa-google-plus','fa-linkedin-square':'fa-linkedin','fa-youtube-play':'fa-youtube'};this.defaultSocialColor=socialModuleLocalized.defaultSocialColor?socialModuleLocalized.defaultSocialColor:'rgb(90,90,90)';this.defaultSocialSize=socialModuleLocalized.defaultSocialSize?socialModuleLocalized.defaultSocialSize:14;module.inputConstructor=api.CZRInput.extend(module.CZRSocialsInputMths||{});module.itemConstructor=api.CZRItem.extend(module.CZRSocialsItem||{});this.defaultModOptModel={is_mod_opt:true,module_id:module.id,'social-size':module.defaultSocialSize};this.defaultItemModel={id:'',title:'','social-icon':'','social-link':'','social-color':module.defaultSocialColor,'social-target':1};this.itemAddedMessage=socialModuleLocalized.i18n['New Social Link created ! Scroll down to edit it.'];if(_.has(api,'czr_activeSectionId')&&module.control.section()==api.czr_activeSectionId()&&'resolved'!=module.isReady.state()){module.ready();}
api.section(module.control.section()).expanded.bind(function(to){if('resolved'!=module.isReady.state()){module.ready();}});module.isReady.then(function(){if(_.isUndefined(module.preItem))
return;module.preItem.bind(function(to,from){if(!_.has(to,'social-icon'))
return;if(_.isEqual(to['social-icon'],from['social-icon']))
return;module.updateItemModel(module.preItem,true);});});},updateItemModel:function(item_instance,is_preItem){var item=item_instance,module=this;is_preItem=is_preItem||false;if(!_.has(item(),'social-icon')||_.isEmpty(item()['social-icon']))
return;var _new_model,_new_title,_new_color;_new_model=$.extend(true,{},item());_new_title=this.getTitleFromIcon(_new_model['social-icon']);_new_color=module.defaultSocialColor;if(!is_preItem&&item.czr_Input.has('social-color'))
_new_color=item.czr_Input('social-color')();_new_title=[socialModuleLocalized.i18n['Follow us on'],_new_title].join(' ');if(is_preItem){_new_model=$.extend(_new_model,{title:_new_title,'social-color':_new_color});item.set(_new_model);}else{item.czr_Input('title').set(_new_title);if(item.czr_Input('social-color')){item.czr_Input('social-color').set(_new_color);}}},getTitleFromIcon:function(icon){return api.CZR_Helpers.capitalize(icon.replace('fa-','').replace('envelope','email'));},getIconFromTitle:function(title){return 'fa-'.title.toLowerCase().replace('envelope','email');},_strReplace:function($f,$r,$s){return $s.replace(new RegExp("("+(typeof($f)=="string"?$f.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&"):$f.map(function(i){return i.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}).join("|"))+")","g"),typeof($r)=="string"?$r:typeof($f)=="string"?$r[0]:function(i){return $r[$f.indexOf(i)]});},buildFaIcon:function(value){var _fa_group='fab',_icon_class=value.toLowerCase(),solidIcons=this.fa_solid_icons,iconsReplacement=this.fa_icons_replacement;_icon_class=this._strReplace(_.keys(iconsReplacement),_.values(iconsReplacement),_icon_class);if(_icon_class.match(/-o$/)){_fa_group='far';_icon_class=_icon_class.replace(/-o$/,'');}
else if(_.contains(solidIcons,_icon_class)){_fa_group='fas';}
return _fa_group+' '+_icon_class;},CZRSocialsInputMths:{setupSelect:function(){var input=this,item=input.input_parent,module=input.module,socialList=module.social_icons,solidIcons=module.fa_solid_icons,iconsReplacement=module.fa_icons_eplacement,_model=item(),is_preItem=_.isEmpty(_model.id);if(is_preItem){socialList=_.union([socialModuleLocalized.i18n['Select a social icon']||'Select a social icon'],socialList);}
_.each(socialList,function(icon_name,k){icon_name=_.isEmpty(icon_name)?'':icon_name;var _value=(is_preItem&&0===k)?'':'fa-'+icon_name.toLowerCase(),_attributes={value:_value,html:module.getTitleFromIcon(icon_name)};if(_value==_model['social-icon'])
$.extend(_attributes,{selected:"selected"});$('select[data-czrtype="social-icon"]',input.container).append($('<option>',_attributes));});function addIcon(state){if(!state.id){return state.text;}
var $state=$('<span class="'+module.buildFaIcon(state.element.value.toLowerCase())+'"></span><span class="social-name">&nbsp;&nbsp;'+state.text+'</span>');return $state;}
$('select[data-czrtype="social-icon"]',input.container).select2({templateResult:addIcon,templateSelection:addIcon});},setupColorPicker:function(obj){var input=this,item=input.input_parent,module=input.module,$el=$('input[data-czrtype="social-color"]',input.container);$el.iris({palettes:true,hide:false,defaultColor:module.defaultSocialColor||'rgba(255,255,255,0.7)',change:function(e,o){if(_.has(o,'color')&&16777215==o.color._color)
$(this).val(module.defaultSocialColor||'rgba(255,255,255,0.7)');else
$(this).val(o.color.toString());$(this).trigger('colorpickerchange').trigger('change');}});$el.closest('div').on('click keydown',function(){module._adjustScrollExpandedBlock(input.container);});}},CZRSocialsItem:{ready:function(){var item=this;api.CZRItem.prototype.ready.call(item);item.bind('social-icon:changed',function(){item.module.updateItemModel(item);});},_buildTitle:function(title,icon,color){var item=this,module=item.module;title=title||('string'===typeof(icon)?api.CZR_Helpers.capitalize(icon.replace('fa-','')):'');title=api.CZR_Helpers.truncate(title,20);icon=icon||'fa-'+module.social_icons[0];color=color||module.defaultSocialColor;return '<div><span class="'+module.buildFaIcon(icon)+'" style="color:'+color+'"></span> '+title+'</div>';},writeItemViewTitle:function(model){var item=this,module=item.module,_model=model||item(),_title=module.getTitleFromIcon(_model['social-icon']);$('.'+module.control.css_attr.item_title,item.container).html(item._buildTitle(_title,_model['social-icon'],_model['social-color']));}},});})(wp.customize,jQuery,_);(function(api,$){api.czrModuleMap=api.czrModuleMap||{};$.extend(api.czrModuleMap,{czr_social_module:{mthds:CZRSocialModuleMths,crud:true,name:'Social Icons',has_mod_opt:true},});})(wp.customize,jQuery);