(function(wp,$){var api=api||wp.customize;$(function($){var _build_control_id=function(_control){return['#','customize-control-tc_theme_options-',_control].join('');};var _get_grid_design_controls=function(){return $(themeServerControlParams.gridDesignControls.map(function(_control){return _build_control_id(_control);}).join(','));};$(_get_grid_design_controls()).addClass('tc-grid-design').hide();$('.tc-grid-toggle-controls').on('click',function(){$(_get_grid_design_controls()).slideToggle('fast');$(this).toggleClass('open');});$g_logo=$('<img>',{class:'tc-title-google-logo',src:'//www.google.com/images/logos/google_logo_41.png',height:20});$('#accordion-section-fonts_sec').prepend($g_logo);var selectFocusResults=$.Deferred();if('undefined'!==typeof $.fn.select2&&'undefined'!==typeof $.fn.select2.amd&&'function'===typeof $.fn.select2.amd.require){$.fn.select2.amd.require(['select2/results','select2/utils'],function(Result,Utils){var ResultsAdapter=function($element,options,dataAdapter){ResultsAdapter.__super__.constructor.call(this,$element,options,dataAdapter);};Utils.Extend(ResultsAdapter,Result);ResultsAdapter.prototype.bind=function(container,$container){var _self=this;container.on('results:focus',function(params){if(params.element.attr('aria-selected')!='true'){_self.trigger('select',{data:params.data});}});ResultsAdapter.__super__.bind.call(this,container,$container);};selectFocusResults.resolve(ResultsAdapter);});}
else{selectFocusResults.resolve(false);}
$.when(selectFocusResults).done(function(customResultsAdapter){var _skin_select2_params={minimumResultsForSearch:-1,templateResult:paintSkinOptionElement,templateSelection:paintSkinOptionElement,escapeMarkup:function(m){return m;}},_fonts_select2_params={minimumResultsForSearch:-1,templateResult:paintFontOptionElement,templateSelection:paintFontOptionElement,escapeMarkup:function(m){return m;},};if(customResultsAdapter){$.extend(_skin_select2_params,{resultsAdapter:customResultsAdapter,closeOnSelect:false,});$.extend(_fonts_select2_params,{resultsAdapter:customResultsAdapter,closeOnSelect:false,});}
$('select[data-customize-setting-link="tc_theme_options[tc_skin]"]').select2(_skin_select2_params);function paintSkinOptionElement(state){if(!state.id)return state.text;return '<span class="tc-select2-skin-color" style="background:'+$(state.element).data('hex')+'">'+$(state.element).data('hex')+'<span>';}
$('select[data-customize-setting-link="tc_theme_options[tc_fonts]"]').select2(_fonts_select2_params);function paintFontOptionElement(state){if(!state.id&&(-1!=state.text.indexOf('Google')))
return '<img class="tc-google-logo" src="//www.google.com/images/logos/google_logo_41.png" height="20"/> Font pairs';else if(!state.id)
return state.text;return '<span class="tc-select2-font">'+state.text+'</span>';}});if(!themeServerControlParams.isModernStyle){(function(){var _hm_primary_position_option='tc_theme_options[tc_menu_position]',_hm_secondary_position_option='tc_theme_options[tc_second_menu_position]',_header_layout_setting=api('tc_theme_options[tc_header_layout]');if('centered'!=_header_layout_setting.get()){toggle_select_option_visibility(false);}
_header_layout_setting.callbacks.add(function(to,from){if('centered'!=to&&'centered'==from){reset_menu_position_option();}
toggle_select_option_visibility('centered'==to);});function reset_menu_position_option(){_.each([_hm_primary_position_option,_hm_secondary_position_option],function(option){if('pull-menu-center'==api(option).get()){api(option).set(themeServerControlParams.isRTL?'pull-menu-left':'pull-menu-right');}});}
function toggle_select_option_visibility(is_header_centered){_.each([_hm_primary_position_option,_hm_secondary_position_option],function(option){var $_select=api.control(option).container.find("select");$_select.find('option[value="pull-menu-center"]')[is_header_centered?'removeAttr':'attr']('disabled','disabled');$_select.selecter('destroy').selecter();});}})();}});api.when('tc_theme_options[tc_style]',function(_set){_set.bind(function(){if(api.state.has('selectedChangesetStatus')){api.state('selectedChangesetStatus')('publish');}
api.previewer.save().always(function(){if(_wpCustomizeSettings&&_wpCustomizeSettings.url&&_wpCustomizeSettings.url.parent){var url=[_wpCustomizeSettings.url.parent];url.push('customize.php?&autofocus%5Bcontrol%5D='+_set.id);_.delay(function(){window.location.href=url.join('');},500);}else{_.delay(function(){window.parent.location.reload();});}});});_set.validate=function(value){return themeServerControlParams.isChildTheme?_set():value;};api.control.when(_set.id,function(_ctrl){_ctrl.deferred.embedded.done(function(){api.section(_ctrl.section()).expanded.bind(function(){if(themeServerControlParams.isChildTheme){_ctrl.container.find('select, .selecter').hide();}});});});});api.bind('ready',function(){_.each(['panel','section','control'],function(wot){api.previewer.bind('czr-'+wot+'-focus',function(_id_){var _do=function(){if(api[wot].has(_id_)){api[wot](_id_).focus();}};try{_do();}catch(er){console.log(er);}});});});})(wp,jQuery);